!function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=1)}([function(e,t,o){var n;void 0===(n=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return e.wrap=function(t,o,n){if(!t.collapsed||t.endOffset!=t.startOffset){var r=e.getCommonTopNodes(t.startContainer,t.endContainer);if("li"!=r[0].nodeName.toLowerCase()&&"li"!=r[1].nodeName.toLowerCase()){var i=n();if(r[0]==r[1]){var a=t.cloneContents();i.appendChild(a),t.deleteContents(),t.insertNode(i)}else{for(var d=e.getSelectedNodes(r[0].parentElement,t.startContainer,t.endContainer),s=0,l=d;s<l.length;s++){var u=l[s];if(e.isContainNodeName(u,"br"))return}var c=e.cloneNodes(e.getAfterNodes2(r[0],t.startContainer)),p=e.cloneNodes(e.getBeforeNodes2(r[1],t.endContainer)),f=e.splitNode(t.startContainer,t.startOffset),N=e.splitNode(t.endContainer,t.endOffset);r[0].parentNode.removeChild(r[0]),r[1].parentNode.removeChild(r[1]),i.appendChild(document.createTextNode(f[1]));for(var h=0,v=d;h<v.length;h++){u=v[h];i.appendChild(u),e.unWrap(u,o)}i.appendChild(document.createTextNode(N[0]));for(var g=p.length-1;g>=0;g--)t.insertNode(p[g]);t.insertNode(document.createTextNode(N[1])),t.insertNode(i),t.insertNode(document.createTextNode(f[0]));for(g=c.length-1;g>=0;g--)t.insertNode(c[g])}e.pretier(i,o),e.pretier(i.parentNode,o),e.clearSelection()}}},e.getPath=function(t){for(var o=[];!e.isRootNode(t)&&(o.push(t),t.parentNode);)t=t.parentNode;return o},e.unWrap=function(t,o){if(o(t)){for(var n=t.parentNode;t.firstChild;)n.insertBefore(t.firstChild,t);n.removeChild(t),e.pretier(n,o)}for(var r in t.childNodes){if((0^+r)!=+r)break;e.unWrap(t.childNodes[r],o)}},e.getRange=function(){if(!window.getSelection)return document.selection.createRange();var t=e.getSelection();if(t.getRangeAt&&t.rangeCount>0)return t.getRangeAt(0);if(t.anchorNode){var o=document.createRange();return o.setEnd(t.focusNode,t.focusOffset),o}},e.getSelection=function(){return window.getSelection?window.getSelection():document.selection?document.selection.createRange():void 0},e.clearSelection=function(){window.getSelection&&window.getSelection().removeAllRanges()},e.topMyWrapper=function(t,o){return o(t)?t:e.isRootNode(t)?null:e.topMyWrapper(t.parentNode,o)},e.pretier=function(t,o){e.defragmentateTextNodes(t),t.parentNode&&(e.defragmentateTextNodes(t.parentNode),e.deleteEmptyTextNodes(t.parentNode),e.defragmentateMyNodes(t.parentNode,o))},e.cloneNodes=function(t){var o=[];for(var n in t){if((0^+n)!=+n)break;for(var r=t[n].cloneNode(),i=0,a=e.cloneNodes(t[n].childNodes);i<a.length;i++){var d=a[i];r.appendChild(d)}o.push(r)}return o},e.isRootNode=function(e){return!!e.hasAttribute&&e.hasAttribute("editor")},e.findTopNode=function(t,o){for(var n=null,r=t.parentNode;!e.isRootNode(r);){if(r.nodeName.toLowerCase()==o){n=r;break}r=r.parentNode}return n},e.getCommonTopNodes=function(t,o){for(var n=t,r=o;n.parentNode!=r.parentNode;)if(e.isRootNode(n.parentNode)){if(n=t,e.isRootNode(r))break;r=r.parentNode}else n=n.parentNode;return[n,r]},e.getAfterNodes2=function(e,t,o){void 0===o&&(o=!1);var n=[];if(o&&("#text"==t.nodeName?t.parentNode:t)==e)return n;for(var r=e.childNodes,i=0;i<=r.length-1&&r[i]!=t;i++)n.push(r[i]);return n},e.getBeforeNodes2=function(e,t,o){void 0===o&&(o=!1);var n=[];if(o&&("#text"==t.nodeName?t.parentNode:t)==e)return n;for(var r=e.childNodes,i=!1,a=0;a<=r.length-1;a++)i&&n.push(r[a]),r[a]==t&&(i=!0);return n},e.splitNode=function(e,t){var o=[];return"#text"==e.nodeName?(o.push(e.data.substr(0,t)),o.push(e.data.substr(t))):(o.push(e.innerText.substr(0,t)),o.push(e.innerText.substr(t))),o},e.isContainNode=function(t,o){if(t==o)return!0;if("#text"==t.nodeName)return!1;for(var n=!1,r=0;r<=t.childNodes.length-1;r++)if(e.isContainNode(t.childNodes[r],o)){n=!0;break}return n},e.isContainNodeName=function(t,o){if(t.nodeName.toLowerCase()==o)return!0;if("#text"==t.nodeName)return!1;for(var n=!1,r=0;r<=t.childNodes.length-1;r++)if(e.isContainNodeName(t.childNodes[r],o)){n=!0;break}return n},e.isNodeIn=function(e,t){for(var o in t)if(e==t[o])return!0;return!1},e.getSelectedNodes=function(t,o,n){var r=t.childNodes,i=[],a=0,d=e.isRootNode(o.parentNode)?o:o.parentNode,s=e.isRootNode(n.parentNode)?n:n.parentNode;for(var l in r){if((0^+l)!=+l)break;if(0==a&&e.isContainNode(r[l],d)){var u=e.getBeforeNodes2(r[l],d,!0);i=i.concat(u),a=1}else if(1==a){if(e.isContainNode(r[l],s)){var c=e.getAfterNodes2(r[l],s,!0);i=i.concat(c);break}i.push(r[l])}}return i},e.deleteEmptyTextNodes=function(e){for(var t=0,o=e.childNodes;t<=o.length-1;)"#text"==o[t].nodeName&&""==o[t].data?o[t].parentNode.removeChild(o[t]):t++},e.defragmentateTextNodes=function(e){for(var t=0,o=e.childNodes,n=null;t<=o.length-1;)if(n&&"#text"==o[t].nodeName&&"#text"==n.nodeName){var r=n.data;n.data=r+o[t].data,o[t].parentNode.removeChild(o[t])}else n=o[t],t++},e.defragmentateMyNodes=function(e,t){for(var o=0,n=e.childNodes,r=null;o<=n.length-1;)if(r&&t(n[o])&&t(r)){var i=r.innerText;r.innerText=i+n[o].innerText,n[o].parentNode.removeChild(n[o])}else r=n[o],o++},e}();t.StaticTools=o}.apply(t,[o,t]))||(e.exports=n)},function(e,t,o){var n,r;n=[o,t,o(0)],void 0===(r=function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this._wrappersCollection={},this._buttons=new Array,this._keyListeners={},this._editorDiv=e,this._editorDiv.onkeyup=function(e){this.keyPress(e)}.bind(this),e.addEventListener("mouseup",function(e){var t=o.StaticTools.getRange(),n=o.StaticTools.getPath(t.startContainer);for(var r in this._buttons)this._buttons[r].unsetActive(),this.isMyButton(this._buttons[r],n)}.bind(this))}return e.prototype.isMyButton=function(e,t){for(var o in t)t[o].nodeName.toLowerCase()==e.wrapper.elName&&t[o].classList.contains(e.wrapper.className)&&e.setActive()},e.prototype.keyPress=function(e){var t=o.StaticTools.getRange(),n=o.StaticTools.getPath(t.startContainer);for(var r in this._buttons)this._buttons[r].unsetActive(),this.isMyButton(this._buttons[r],n);null==e.which&&e.keyCode<32&&(e.preventDefault(),this._keyListeners[e.keyCode].exec()),0!=e.which&&0!=e.charCode&&e.which<32&&(e.preventDefault(),this._keyListeners[e.which].exec())},Object.defineProperty(e.prototype,"editorDiv",{get:function(){return this._editorDiv},enumerable:!0,configurable:!0}),e.prototype.addKeyListener=function(e,t){this._keyListeners[e]=t},e.prototype.addWraper=function(e){this._wrappersCollection[e.elName+"_"+e.className]=e},e.prototype.addButton=function(e){if(e.el.addEventListener("mousedown",function(t){t.preventDefault(),this.toolButtonClick(e)}.bind(this)),this._buttons.push(e),this._wrappersCollection[e.wrapper.elName+"_"+e.wrapper.className]=e.wrapper,e.wrapper.child){var t=e.wrapper.child;this._wrappersCollection[t.elName+"_"+t.className]=t}},e.prototype.toolButtonClick=function(e){e.run()},e.prototype.contentToString=function(e){for(var t=e.childNodes,o="",n=0;n<=t.length-1;n++){var r=t[n];if("#text"==r.nodeName)o+=r.data;else{var i=r.nodeName.toLowerCase(),a=r.className,d=this._wrappersCollection[i+"_"+a];o+=d?"br"==i?"[/"+d.bbCode+"]":"["+d.bbCode+"]"+this.contentToString(r)+"[/"+d.bbCode+"]":this.contentToString(r)}}return o},e.prototype.isOpenTag=function(e){for(var t in this._wrappersCollection){var o=this._wrappersCollection[t].bbCode;if(0==e.indexOf("["+o+"]"))return this._wrappersCollection[t]}return null},e.prototype.isCloseTag=function(e){for(var t in this._wrappersCollection){var o=this._wrappersCollection[t].bbCode;if(0==e.indexOf("[/"+o+"]"))return this._wrappersCollection[t]}return null},e.prototype.stringToContent=function(e){for(var t=this.editorDiv,o="",n=0;n<=e.length-1;){var r=e.substr(n,6),i=this.isOpenTag(r);if(i){if(o){var a=document.createTextNode(o);t.appendChild(a),o=""}var d=i.elName,s=i.className,l=document.createElement(d);l.classList.add(s),t.appendChild(l),t=l,n+=i.bbCode.length+2}else{var u=this.isCloseTag(r);if(u){if(t==this.editorDiv)break;if(o){a=document.createTextNode(o);t.appendChild(a),o=""}d=u.elName;t=t.parentElement,n+=u.bbCode.length+3}else o+=e.substr(n,1),n+=1}}if(o){a=document.createTextNode(o);t.appendChild(a),o=""}},e}();t.Editor=n}.apply(t,n))||(e.exports=r)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vdHMvU3RhdGljVG9vbHMudHMiLCJ3ZWJwYWNrOi8vLy4vdHMvRWRpdG9yLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiU3RhdGljVG9vbHMiLCJ3cmFwIiwicmFuZ2UiLCJpc015V3JhcHBlciIsImNyZWF0ZVdyYXBwZXIiLCJjb2xsYXBzZWQiLCJlbmRPZmZzZXQiLCJzdGFydE9mZnNldCIsInRvcE5vZGVzIiwiZ2V0Q29tbW9uVG9wTm9kZXMiLCJzdGFydENvbnRhaW5lciIsImVuZENvbnRhaW5lciIsIm5vZGVOYW1lIiwidG9Mb3dlckNhc2UiLCJ3cmFwcGVyIiwic2VsZWN0ZWRDb250ZW50IiwiY2xvbmVDb250ZW50cyIsImFwcGVuZENoaWxkIiwiZGVsZXRlQ29udGVudHMiLCJpbnNlcnROb2RlIiwic2VsZWN0ZWROb2RlcyIsImdldFNlbGVjdGVkTm9kZXMiLCJwYXJlbnRFbGVtZW50IiwiX2kiLCJzZWxlY3RlZE5vZGVzXzEiLCJsZW5ndGgiLCJzZWxlY3RlZE5vZGUiLCJpc0NvbnRhaW5Ob2RlTmFtZSIsImFmdGVyTm9kZXMiLCJjbG9uZU5vZGVzIiwiZ2V0QWZ0ZXJOb2RlczIiLCJiZWZvcmVOb2RlcyIsImdldEJlZm9yZU5vZGVzMiIsInNwbGl0U3RhcnQiLCJzcGxpdE5vZGUiLCJzcGxpdEVuZCIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsImRvY3VtZW50IiwiY3JlYXRlVGV4dE5vZGUiLCJfYSIsInNlbGVjdGVkTm9kZXNfMiIsInVuV3JhcCIsInByZXRpZXIiLCJjbGVhclNlbGVjdGlvbiIsImdldFBhdGgiLCJub2RlIiwicmVzdWx0IiwiaXNSb290Tm9kZSIsInB1c2giLCJmaXJzdENoaWxkIiwiaW5zZXJ0QmVmb3JlIiwiY2hpbGROb2RlcyIsImdldFJhbmdlIiwid2luZG93IiwiZ2V0U2VsZWN0aW9uIiwic2VsZWN0aW9uIiwiY3JlYXRlUmFuZ2UiLCJnZXRSYW5nZUF0IiwicmFuZ2VDb3VudCIsImFuY2hvck5vZGUiLCJzZXRFbmQiLCJmb2N1c05vZGUiLCJmb2N1c09mZnNldCIsInJlbW92ZUFsbFJhbmdlcyIsInRvcE15V3JhcHBlciIsImRlZnJhZ21lbnRhdGVUZXh0Tm9kZXMiLCJkZWxldGVFbXB0eVRleHROb2RlcyIsImRlZnJhZ21lbnRhdGVNeU5vZGVzIiwibm9kZXMiLCJjbG9uZWROb2RlIiwiY2xvbmVOb2RlIiwiY2hpbGROb2Rlc18xIiwiY2hpbGROb2RlIiwiaGFzQXR0cmlidXRlIiwiZmluZFRvcE5vZGUiLCJwYXJlbnQiLCJzdGFydE5vZGUiLCJlbmROb2RlIiwic3RhcnRUb3AiLCJlbmRUb3AiLCJ0b3BOb2RlIiwiY2hlY2tJc1RleHQiLCJpc1B1c2giLCJvZmZzZXQiLCJkYXRhIiwic3Vic3RyIiwiaW5uZXJUZXh0IiwiaXNDb250YWluTm9kZSIsImNvbnRhaW5lciIsImNoaWxkIiwiaXNOb2RlSW4iLCJzdGFnZSIsInNuIiwiZW4iLCJuZXh0U2libGluZ05vZGVzIiwiY29uY2F0IiwicHJldmlvdXNTaWJsaW5nTm9kZXMiLCJjb250YWluZXJOb2RlIiwicHJldmlvdXNOb2RlIiwicHJldmlvdXNUZXh0IiwiRWRpdG9yIiwiZWRpdG9yRGl2IiwidGhpcyIsIl93cmFwcGVyc0NvbGxlY3Rpb24iLCJfYnV0dG9ucyIsIkFycmF5IiwiX2tleUxpc3RlbmVycyIsIl9lZGl0b3JEaXYiLCJvbmtleXVwIiwiZXZlbnQiLCJrZXlQcmVzcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiU3RhdGljVG9vbHNfMSIsInBhdGgiLCJ1bnNldEFjdGl2ZSIsImlzTXlCdXR0b24iLCJidXR0b24iLCJlbE5hbWUiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsImNsYXNzTmFtZSIsInNldEFjdGl2ZSIsIndoaWNoIiwia2V5Q29kZSIsInByZXZlbnREZWZhdWx0IiwiZXhlYyIsImNoYXJDb2RlIiwiYWRkS2V5TGlzdGVuZXIiLCJrZXlMaXN0ZW5lciIsImFkZFdyYXBlciIsImFkZEJ1dHRvbiIsImVsIiwidG9vbEJ1dHRvbkNsaWNrIiwicnVuIiwiY29udGVudFRvU3RyaW5nIiwid3JhcHBlckluZm8iLCJiYkNvZGUiLCJpc09wZW5UYWciLCJzdHIiLCJpbmRleE9mIiwiaXNDbG9zZVRhZyIsInN0cmluZ1RvQ29udGVudCIsImN1cmVudE5vZGUiLCJjdXJTdHIiLCJjdXJlbnRQb3MiLCJzdWJTdHIiLCJvcGVuVGFnIiwidHh0IiwibmV3Tm9kZSIsImNyZWF0ZUVsZW1lbnQiLCJhZGQiLCJjbG9zZVRhZyJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsRUFBQSxHQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLEdBQUEsQ0FDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxRQUFBLElBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFD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LEVBQVdsRCxLQUFLdUMsV0FBV0ssR0FDL0IsR0FBR00sRUFBSCxDQUNJLEdBQUdULEdBQWN6QyxLQUFLRCxVQUNsQixNQUVKLEdBQUcyQyxFQUFPLENBQ0ZJLEVBQU0vRyxTQUFTQyxlQUFlMEcsR0FDbENELEVBQVcvSCxZQUFZb0ksR0FDdkJKLEVBQVMsR0FFVDFCLEVBQVNrQyxFQUFTbEMsT0FDdEJ5QixFQUFhQSxFQUFXMUgsY0FDeEI0SCxHQUFhTyxFQUFTZixPQUFPakgsT0FBUyxPQUcxQ3dILEdBQVVMLEVBQUl0RCxPQUFPNEQsRUFBVyxHQUNoQ0EsR0FBYSxHQUVqQixHQUFHRCxFQUFPLENBQ0ZJLEVBQU0vRyxTQUFTQyxlQUFlMEcsR0FDbENELEVBQVcvSCxZQUFZb0ksR0FDdkJKLEVBQVMsS0FJckI1QyxFQW5NQSxHQUFhdkksRUFBQXVJIiwiZmlsZSI6ImVkaXRvci5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxKTtcbiIsImV4cG9ydCBjbGFzcyBTdGF0aWNUb29scyB7XG5cbiAgICBzdGF0aWMgd3JhcChyYW5nZTpSYW5nZSwgaXNNeVdyYXBwZXI6KG5vZGU6Tm9kZSk9PmJvb2xlYW4sIGNyZWF0ZVdyYXBwZXI6KCk9PkVsZW1lbnQpXG4gICAge1xuICAgICAgICBpZihyYW5nZS5jb2xsYXBzZWQgJiYgcmFuZ2UuZW5kT2Zmc2V0ID09IHJhbmdlLnN0YXJ0T2Zmc2V0KSByZXR1cm47XG4gICAgICAgIGxldCB0b3BOb2RlcyA9IFN0YXRpY1Rvb2xzLmdldENvbW1vblRvcE5vZGVzKHJhbmdlLnN0YXJ0Q29udGFpbmVyLCByYW5nZS5lbmRDb250YWluZXIpO1xuICAgICAgICBpZiggdG9wTm9kZXNbMF0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PSAnbGknIHx8XG4gICAgICAgICAgICB0b3BOb2Rlc1sxXS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09ICdsaScpe1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgbGV0IHdyYXBwZXIgPSBjcmVhdGVXcmFwcGVyKCk7XG4gICAgICAgIGlmKHRvcE5vZGVzWzBdID09IHRvcE5vZGVzWzFdKXtcbiAgICAgICAgICAgIGxldCBzZWxlY3RlZENvbnRlbnQgPSByYW5nZS5jbG9uZUNvbnRlbnRzKCk7XG4gICAgICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKHNlbGVjdGVkQ29udGVudCk7XG4gICAgICAgICAgICByYW5nZS5kZWxldGVDb250ZW50cygpO1xuICAgICAgICAgICAgcmFuZ2UuaW5zZXJ0Tm9kZSh3cmFwcGVyKTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBsZXQgc2VsZWN0ZWROb2RlcyA9IFN0YXRpY1Rvb2xzLmdldFNlbGVjdGVkTm9kZXModG9wTm9kZXNbMF0ucGFyZW50RWxlbWVudCwgcmFuZ2Uuc3RhcnRDb250YWluZXIsIHJhbmdlLmVuZENvbnRhaW5lcik7XG4gICAgICAgICAgICBmb3IobGV0IHNlbGVjdGVkTm9kZSBvZiBzZWxlY3RlZE5vZGVzKXtcbiAgICAgICAgICAgICAgICBpZihTdGF0aWNUb29scy5pc0NvbnRhaW5Ob2RlTmFtZShzZWxlY3RlZE5vZGUsICdicicpKXtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBhZnRlck5vZGVzID0gU3RhdGljVG9vbHMuY2xvbmVOb2RlcyhTdGF0aWNUb29scy5nZXRBZnRlck5vZGVzMih0b3BOb2Rlc1swXSwgcmFuZ2Uuc3RhcnRDb250YWluZXIpKTtcbiAgICAgICAgICAgIGxldCBiZWZvcmVOb2RlcyA9IFN0YXRpY1Rvb2xzLmNsb25lTm9kZXMoU3RhdGljVG9vbHMuZ2V0QmVmb3JlTm9kZXMyKHRvcE5vZGVzWzFdLCByYW5nZS5lbmRDb250YWluZXIpKTtcbiAgICAgICAgICAgIGxldCBzcGxpdFN0YXJ0ID0gU3RhdGljVG9vbHMuc3BsaXROb2RlKHJhbmdlLnN0YXJ0Q29udGFpbmVyLCByYW5nZS5zdGFydE9mZnNldCk7XG4gICAgICAgICAgICBsZXQgc3BsaXRFbmQgPSBTdGF0aWNUb29scy5zcGxpdE5vZGUocmFuZ2UuZW5kQ29udGFpbmVyLCByYW5nZS5lbmRPZmZzZXQpO1xuICAgICAgICAgICAgLy8oPEhUTUxFbGVtZW50PnRvcE5vZGVzWzBdKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICg8SFRNTEVsZW1lbnQ+dG9wTm9kZXNbMF0pLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodG9wTm9kZXNbMF0pO1xuICAgICAgICAgICAgLy8oPEhUTUxFbGVtZW50PnRvcE5vZGVzWzFdKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICg8SFRNTEVsZW1lbnQ+dG9wTm9kZXNbMV0pLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodG9wTm9kZXNbMV0pO1xuICAgICAgICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShzcGxpdFN0YXJ0WzFdKSk7XG4gICAgICAgICAgICBmb3IobGV0IHNlbGVjdGVkTm9kZSBvZiBzZWxlY3RlZE5vZGVzKXtcbiAgICAgICAgICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKHNlbGVjdGVkTm9kZSk7XG4gICAgICAgICAgICAgICAgU3RhdGljVG9vbHMudW5XcmFwKHNlbGVjdGVkTm9kZSwgaXNNeVdyYXBwZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShzcGxpdEVuZFswXSkpO1xuXG4gICAgICAgICAgICBmb3IobGV0IGk9YmVmb3JlTm9kZXMubGVuZ3RoLTE7IGk+PTA7IGktLSl7XG4gICAgICAgICAgICAgICAgcmFuZ2UuaW5zZXJ0Tm9kZShiZWZvcmVOb2Rlc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByYW5nZS5pbnNlcnROb2RlKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHNwbGl0RW5kWzFdKSk7XG4gICAgICAgICAgICByYW5nZS5pbnNlcnROb2RlKHdyYXBwZXIpO1xuICAgICAgICAgICAgcmFuZ2UuaW5zZXJ0Tm9kZShkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShzcGxpdFN0YXJ0WzBdKSk7XG4gICAgICAgICAgICBmb3IobGV0IGk9YWZ0ZXJOb2Rlcy5sZW5ndGgtMTsgaT49MDsgaS0tKXtcbiAgICAgICAgICAgICAgICByYW5nZS5pbnNlcnROb2RlKGFmdGVyTm9kZXNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBTdGF0aWNUb29scy5wcmV0aWVyKHdyYXBwZXIsIGlzTXlXcmFwcGVyKTtcbiAgICAgICAgU3RhdGljVG9vbHMucHJldGllcih3cmFwcGVyLnBhcmVudE5vZGUsIGlzTXlXcmFwcGVyKTtcbiAgICAgICAgU3RhdGljVG9vbHMuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0UGF0aChub2RlOk5vZGUpOk5vZGVbXSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBbXTtcbiAgICAgICAgd2hpbGUoIVN0YXRpY1Rvb2xzLmlzUm9vdE5vZGUobm9kZSkpe1xuICAgICAgICAgICAgcmVzdWx0LnB1c2gobm9kZSk7XG4gICAgICAgICAgICBpZihub2RlLnBhcmVudE5vZGUpe1xuICAgICAgICAgICAgICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGU7XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIHN0YXRpYyB1bldyYXAobm9kZTpOb2RlLCBpc015V3JhcHBlcjoobm9kZTpOb2RlKT0+Ym9vbGVhbilcbiAgICB7XG4gICAgICAgIGlmKGlzTXlXcmFwcGVyKG5vZGUpKXtcbiAgICAgICAgICAgIGxldCBwYXJlbnROb2RlID0gbm9kZS5wYXJlbnROb2RlO1xuICAgICAgICAgICAgd2hpbGUgKG5vZGUuZmlyc3RDaGlsZCkge1xuICAgICAgICAgICAgICAgIHBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG5vZGUuZmlyc3RDaGlsZCwgbm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJlbnROb2RlLnJlbW92ZUNoaWxkKG5vZGUpO1xuICAgICAgICAgICAgU3RhdGljVG9vbHMucHJldGllcihwYXJlbnROb2RlLCBpc015V3JhcHBlcik7XG4gICAgICAgIH1cbiAgICAgICAgZm9yKGxldCBpIGluIG5vZGUuY2hpbGROb2Rlcyl7XG4gICAgICAgICAgICBpZigoK2kgXiAwKSAhPT0gK2kpIGJyZWFrO1xuICAgICAgICAgICAgU3RhdGljVG9vbHMudW5XcmFwKG5vZGUuY2hpbGROb2Rlc1tpXSwgaXNNeVdyYXBwZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc3RhdGljIGdldFJhbmdlKCk6UmFuZ2VcbiAgICB7XG4gICAgICAgIGlmICh3aW5kb3cuZ2V0U2VsZWN0aW9uKSB7XG4gICAgICAgICAgICBsZXQgc2VsZWN0aW9uID0gU3RhdGljVG9vbHMuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgICAgICBpZihzZWxlY3Rpb24uZ2V0UmFuZ2VBdCAmJiBzZWxlY3Rpb24ucmFuZ2VDb3VudCA+IDApe1xuICAgICAgICAgICAgICAgIHJldHVybiBzZWxlY3Rpb24uZ2V0UmFuZ2VBdCgwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKHNlbGVjdGlvbi5hbmNob3JOb2RlKXtcbiAgICAgICAgICAgICAgICBsZXQgcmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuICAgICAgICAgICAgICAgIHJhbmdlLnNldEVuZCAoc2VsZWN0aW9uLmZvY3VzTm9kZSwgc2VsZWN0aW9uLmZvY3VzT2Zmc2V0KTtcblx0XHRcdFx0cmV0dXJuIHJhbmdlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHJldHVybiAoPGFueT5kb2N1bWVudCkuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyBnZXRTZWxlY3Rpb24oKTpTZWxlY3Rpb25cbiAgICB7XG4gICAgICAgIGlmICh3aW5kb3cuZ2V0U2VsZWN0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gd2luZG93LmdldFNlbGVjdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIGlmICgoPGFueT5kb2N1bWVudCkuc2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAvL0lFXG4gICAgICAgICAgICByZXR1cm4gKDxhbnk+ZG9jdW1lbnQpLnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc3RhdGljIGNsZWFyU2VsZWN0aW9uKClcbiAgICB7XG4gICAgICAgIGlmICh3aW5kb3cuZ2V0U2VsZWN0aW9uKSB7XG4gICAgICAgICAgICB3aW5kb3cuZ2V0U2VsZWN0aW9uKCkucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdGF0aWMgdG9wTXlXcmFwcGVyKG5vZGU6Tm9kZSwgaXNNeVdyYXBwZXI6KG5vZGU6Tm9kZSk9PmJvb2xlYW4pOk5vZGVcbiAgICB7XG4gICAgICAgIGlmKGlzTXlXcmFwcGVyKG5vZGUpKXtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9XG4gICAgICAgIGlmKFN0YXRpY1Rvb2xzLmlzUm9vdE5vZGUobm9kZSkpe1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFN0YXRpY1Rvb2xzLnRvcE15V3JhcHBlcihub2RlLnBhcmVudE5vZGUsIGlzTXlXcmFwcGVyKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgcHJldGllcih3cmFwcGVyOk5vZGUsIGlzTXlXcmFwcGVyOihub2RlOk5vZGUpPT5ib29sZWFuKVxuICAgIHtcbiAgICAgICAgU3RhdGljVG9vbHMuZGVmcmFnbWVudGF0ZVRleHROb2Rlcyh3cmFwcGVyKTtcbiAgICAgICAgaWYod3JhcHBlci5wYXJlbnROb2RlKXtcbiAgICAgICAgICAgIFN0YXRpY1Rvb2xzLmRlZnJhZ21lbnRhdGVUZXh0Tm9kZXMod3JhcHBlci5wYXJlbnROb2RlKTtcbiAgICAgICAgICAgIFN0YXRpY1Rvb2xzLmRlbGV0ZUVtcHR5VGV4dE5vZGVzKHdyYXBwZXIucGFyZW50Tm9kZSk7XG4gICAgICAgICAgICBTdGF0aWNUb29scy5kZWZyYWdtZW50YXRlTXlOb2Rlcyh3cmFwcGVyLnBhcmVudE5vZGUsIGlzTXlXcmFwcGVyKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyBjbG9uZU5vZGVzKG5vZGVzOk5vZGVbXXxOb2RlTGlzdCk6Tm9kZVtdXG4gICAge1xuICAgICAgICBsZXQgcmVzdWx0ID0gW107XG4gICAgICAgIGZvcihsZXQgaSBpbiBub2Rlcyl7XG4gICAgICAgICAgICBpZigoK2kgXiAwKSAhPT0gK2kpIGJyZWFrO1xuICAgICAgICAgICAgICAgIGxldCBjbG9uZWROb2RlID0gbm9kZXNbaV0uY2xvbmVOb2RlKCk7XG4gICAgICAgICAgICAgICAgbGV0IGNoaWxkTm9kZXMgPSBTdGF0aWNUb29scy5jbG9uZU5vZGVzKG5vZGVzW2ldLmNoaWxkTm9kZXMpO1xuICAgICAgICAgICAgICAgIGZvcihsZXQgY2hpbGROb2RlIG9mIGNoaWxkTm9kZXMpe1xuICAgICAgICAgICAgICAgICAgICBjbG9uZWROb2RlLmFwcGVuZENoaWxkKGNoaWxkTm9kZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGNsb25lZE5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgc3RhdGljIGlzUm9vdE5vZGUobm9kZTpOb2RlKVxuICAgIHtcbiAgICAgICAgbGV0IHIgPSAoKDxIVE1MRWxlbWVudD5ub2RlKS5oYXNBdHRyaWJ1dGUpID8gKDxIVE1MRWxlbWVudD5ub2RlKS5oYXNBdHRyaWJ1dGUoJ2VkaXRvcicpIDogZmFsc2U7XG4gICAgICAgIHJldHVybiByO1xuICAgIH1cblxuICAgIHN0YXRpYyBmaW5kVG9wTm9kZShjaGlsZE5vZGU6Tm9kZSwgbm9kZU5hbWU6c3RyaW5nKTpOb2RlXG4gICAge1xuICAgICAgICBsZXQgcmVzdWx0ID0gbnVsbDtcbiAgICAgICAgbGV0IHBhcmVudCA9IGNoaWxkTm9kZS5wYXJlbnROb2RlO1xuICAgICAgICB3aGlsZSghU3RhdGljVG9vbHMuaXNSb290Tm9kZShwYXJlbnQpKXtcbiAgICAgICAgICAgIGlmKHBhcmVudC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09IG5vZGVOYW1lKXtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBwYXJlbnQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50Tm9kZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXRDb21tb25Ub3BOb2RlcyhzdGFydE5vZGU6Tm9kZSwgZW5kTm9kZTpOb2RlKTpOb2RlW11cbiAgICB7XG4gICAgICAgIGxldCBzdGFydFRvcCA9IHN0YXJ0Tm9kZTtcbiAgICAgICAgbGV0IGVuZFRvcCA9IGVuZE5vZGU7XG4gICAgICAgIHdoaWxlKHN0YXJ0VG9wLnBhcmVudE5vZGUgIT0gZW5kVG9wLnBhcmVudE5vZGUpe1xuICAgICAgICAgICAgaWYoIVN0YXRpY1Rvb2xzLmlzUm9vdE5vZGUoc3RhcnRUb3AucGFyZW50Tm9kZSkpe1xuICAgICAgICAgICAgICAgIHN0YXJ0VG9wID0gc3RhcnRUb3AucGFyZW50Tm9kZTtcbiAgICAgICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICAgICBzdGFydFRvcCA9IHN0YXJ0Tm9kZTtcbiAgICAgICAgICAgICAgICBpZighU3RhdGljVG9vbHMuaXNSb290Tm9kZShlbmRUb3ApKXtcbiAgICAgICAgICAgICAgICAgICAgZW5kVG9wID0gZW5kVG9wLnBhcmVudE5vZGU7XG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW3N0YXJ0VG9wLCBlbmRUb3BdO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXRBZnRlck5vZGVzMih0b3BOb2RlOk5vZGUsIGVuZENvbnRhaW5lcjpOb2RlLCBjaGVja0lzVGV4dCA9IGZhbHNlKTpOb2RlW11cbiAgICB7XG4gICAgICAgIGxldCByZXN1bHQ6Tm9kZVtdID0gW107XG4gICAgICAgIGlmKGNoZWNrSXNUZXh0KXtcbiAgICAgICAgICAgIGxldCBzbiA9IChlbmRDb250YWluZXIubm9kZU5hbWUgPT0gJyN0ZXh0JykgPyBlbmRDb250YWluZXIucGFyZW50Tm9kZSA6IGVuZENvbnRhaW5lcjtcbiAgICAgICAgICAgIGlmKHNuID09IHRvcE5vZGUpIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG5vZGVzID0gdG9wTm9kZS5jaGlsZE5vZGVzO1xuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDw9IG5vZGVzLmxlbmd0aCAtIDE7IGkrKyl7XG4gICAgICAgICAgICBpZihub2Rlc1tpXSA9PSBlbmRDb250YWluZXIpe1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzdWx0LnB1c2gobm9kZXNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldEJlZm9yZU5vZGVzMih0b3BOb2RlOk5vZGUsIHN0YXJ0Q29udGFpbmVyOk5vZGUsIGNoZWNrSXNUZXh0ID0gZmFsc2UpOk5vZGVbXVxuICAgIHtcbiAgICAgICAgbGV0IHJlc3VsdDpOb2RlW10gPSBbXTtcbiAgICAgICAgaWYoY2hlY2tJc1RleHQpe1xuICAgICAgICAgICAgbGV0IHNuID0gKHN0YXJ0Q29udGFpbmVyLm5vZGVOYW1lID09ICcjdGV4dCcpID8gc3RhcnRDb250YWluZXIucGFyZW50Tm9kZSA6IHN0YXJ0Q29udGFpbmVyO1xuICAgICAgICAgICAgaWYoc24gPT0gdG9wTm9kZSkgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgbm9kZXMgPSB0b3BOb2RlLmNoaWxkTm9kZXM7XG4gICAgICAgIGxldCBpc1B1c2ggPSBmYWxzZTtcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8PSBub2Rlcy5sZW5ndGggLSAxOyBpKyspe1xuICAgICAgICAgICAgaWYoaXNQdXNoKXtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChub2Rlc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihub2Rlc1tpXSA9PSBzdGFydENvbnRhaW5lcil7XG4gICAgICAgICAgICAgICAgaXNQdXNoID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIHN0YXRpYyBzcGxpdE5vZGUobm9kZTpOb2RlLCBvZmZzZXQ6bnVtYmVyKTphbnlbXVxuICAgIHtcbiAgICAgICAgbGV0IHJlc3VsdDphbnlbXSA9IFtdO1xuICAgICAgICBpZihub2RlLm5vZGVOYW1lID09ICcjdGV4dCcpe1xuICAgICAgICAgICAgcmVzdWx0LnB1c2goKDxhbnk+bm9kZSkuZGF0YS5zdWJzdHIoMCwgb2Zmc2V0KSk7XG4gICAgICAgICAgICByZXN1bHQucHVzaCgoPGFueT5ub2RlKS5kYXRhLnN1YnN0cihvZmZzZXQpKTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICByZXN1bHQucHVzaCgoPGFueT5ub2RlKS5pbm5lclRleHQuc3Vic3RyKDAsIG9mZnNldCkpO1xuICAgICAgICAgICAgcmVzdWx0LnB1c2goKDxhbnk+bm9kZSkuaW5uZXJUZXh0LnN1YnN0cihvZmZzZXQpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIHN0YXRpYyBpc0NvbnRhaW5Ob2RlKGNvbnRhaW5lcjpOb2RlLCBjaGlsZDpOb2RlKVxuICAgIHtcbiAgICAgICAgaWYoY29udGFpbmVyID09IGNoaWxkKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgaWYoY29udGFpbmVyLm5vZGVOYW1lID09ICcjdGV4dCcpIHJldHVybiBmYWxzZTtcbiAgICAgICAgbGV0IHJlc3VsdCA9IGZhbHNlO1xuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDw9IGNvbnRhaW5lci5jaGlsZE5vZGVzLmxlbmd0aCAtIDE7IGkrKyl7XG4gICAgICAgICAgICBpZihTdGF0aWNUb29scy5pc0NvbnRhaW5Ob2RlKGNvbnRhaW5lci5jaGlsZE5vZGVzW2ldLCBjaGlsZCkpe1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICBzdGF0aWMgaXNDb250YWluTm9kZU5hbWUoY29udGFpbmVyOk5vZGUsIG5vZGVOYW1lOnN0cmluZylcbiAgICB7XG4gICAgICAgIGlmKGNvbnRhaW5lci5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09IG5vZGVOYW1lKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgaWYoY29udGFpbmVyLm5vZGVOYW1lID09ICcjdGV4dCcpIHJldHVybiBmYWxzZTtcbiAgICAgICAgbGV0IHJlc3VsdCA9IGZhbHNlO1xuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDw9IGNvbnRhaW5lci5jaGlsZE5vZGVzLmxlbmd0aCAtIDE7IGkrKyl7XG4gICAgICAgICAgICBpZihTdGF0aWNUb29scy5pc0NvbnRhaW5Ob2RlTmFtZShjb250YWluZXIuY2hpbGROb2Rlc1tpXSwgbm9kZU5hbWUpKXtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgc3RhdGljIGlzTm9kZUluKG5vZGU6Tm9kZSwgbm9kZXM6Tm9kZVtdKTpib29sZWFuXG4gICAge1xuICAgICAgICBmb3IobGV0IGkgaW4gbm9kZXMpe1xuICAgICAgICAgICAgaWYobm9kZSA9PSBub2Rlc1tpXSl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXRTZWxlY3RlZE5vZGVzKHBhcmVudDpOb2RlLCBzdGFydE5vZGU6Tm9kZSwgZW5kTm9kZTpOb2RlKTpOb2RlW11cbiAgICB7XG4gICAgICAgIGxldCBjaGlsZE5vZGVzID0gcGFyZW50LmNoaWxkTm9kZXM7XG4gICAgICAgIGxldCByZXN1bHQ6Tm9kZVtdID0gW107XG4gICAgICAgIGxldCBzdGFnZSA9IDA7XG4gICAgICAgIGxldCBzbiA9IChTdGF0aWNUb29scy5pc1Jvb3ROb2RlKHN0YXJ0Tm9kZS5wYXJlbnROb2RlKSkgPyBzdGFydE5vZGUgOiBzdGFydE5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgbGV0IGVuID0gKFN0YXRpY1Rvb2xzLmlzUm9vdE5vZGUoZW5kTm9kZS5wYXJlbnROb2RlKSkgPyBlbmROb2RlIDogZW5kTm9kZS5wYXJlbnROb2RlO1xuICAgICAgICBmb3IobGV0IGkgaW4gY2hpbGROb2Rlcyl7XG4gICAgICAgICAgICBpZigoK2kgXiAwKSAhPT0gK2kpIGJyZWFrO1xuICAgICAgICAgICAgaWYoc3RhZ2UgPT0gMCAmJiBTdGF0aWNUb29scy5pc0NvbnRhaW5Ob2RlKGNoaWxkTm9kZXNbaV0sIHNuKSl7XG4gICAgICAgICAgICAgICAgbGV0IG5leHRTaWJsaW5nTm9kZXMgPSBTdGF0aWNUb29scy5nZXRCZWZvcmVOb2RlczIoY2hpbGROb2Rlc1tpXSwgc24sIHRydWUpO1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdC5jb25jYXQobmV4dFNpYmxpbmdOb2Rlcyk7XG4gICAgICAgICAgICAgICAgc3RhZ2UgPSAxO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoc3RhZ2UgPT0gMSl7XG4gICAgICAgICAgICAgICAgaWYoIVN0YXRpY1Rvb2xzLmlzQ29udGFpbk5vZGUoY2hpbGROb2Rlc1tpXSwgZW4pKXtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goY2hpbGROb2Rlc1tpXSk7XG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgIGxldCBwcmV2aW91c1NpYmxpbmdOb2RlcyA9IFN0YXRpY1Rvb2xzLmdldEFmdGVyTm9kZXMyKGNoaWxkTm9kZXNbaV0sIGVuLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0LmNvbmNhdChwcmV2aW91c1NpYmxpbmdOb2Rlcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIHN0YXRpYyBkZWxldGVFbXB0eVRleHROb2Rlcyhjb250YWluZXJOb2RlOk5vZGUpXG4gICAge1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIGxldCBjaGlsZE5vZGVzID0gPGFueT5jb250YWluZXJOb2RlLmNoaWxkTm9kZXM7XG4gICAgICAgIHdoaWxlKGkgPD0gY2hpbGROb2Rlcy5sZW5ndGggLSAxKXtcbiAgICAgICAgICAgIGlmKGNoaWxkTm9kZXNbaV0ubm9kZU5hbWUgPT0gJyN0ZXh0JyAmJiBjaGlsZE5vZGVzW2ldLmRhdGEgPT0gJycpe1xuICAgICAgICAgICAgICAgIC8vY2hpbGROb2Rlc1tpXS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICBjaGlsZE5vZGVzW2ldLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoY2hpbGROb2Rlc1tpXSk7XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdGF0aWMgZGVmcmFnbWVudGF0ZVRleHROb2Rlcyhjb250YWluZXJOb2RlOk5vZGUpXG4gICAge1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIGxldCBjaGlsZE5vZGVzID0gPGFueT5jb250YWluZXJOb2RlLmNoaWxkTm9kZXM7XG4gICAgICAgIGxldCBwcmV2aW91c05vZGU6YW55ID0gbnVsbDtcbiAgICAgICAgd2hpbGUoaSA8PSBjaGlsZE5vZGVzLmxlbmd0aCAtIDEpe1xuICAgICAgICAgICAgaWYocHJldmlvdXNOb2RlICYmXG4gICAgICAgICAgICAgICAgY2hpbGROb2Rlc1tpXS5ub2RlTmFtZSA9PSAnI3RleHQnICYmXG4gICAgICAgICAgICAgICAgcHJldmlvdXNOb2RlLm5vZGVOYW1lID09ICcjdGV4dCcpe1xuXG4gICAgICAgICAgICAgICAgICAgIGxldCBwcmV2aW91c1RleHQgPSBwcmV2aW91c05vZGUuZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNOb2RlLmRhdGEgPSBwcmV2aW91c1RleHQgKyBjaGlsZE5vZGVzW2ldLmRhdGE7XG4gICAgICAgICAgICAgICAgICAgIC8vY2hpbGROb2Rlc1tpXS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgY2hpbGROb2Rlc1tpXS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGNoaWxkTm9kZXNbaV0pO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgcHJldmlvdXNOb2RlID0gY2hpbGROb2Rlc1tpXTtcbiAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdGF0aWMgZGVmcmFnbWVudGF0ZU15Tm9kZXMoY29udGFpbmVyTm9kZTpOb2RlLCBpc015V3JhcHBlcjoobm9kZTpOb2RlKT0+Ym9vbGVhbilcbiAgICB7XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgbGV0IGNoaWxkTm9kZXMgPSA8YW55PmNvbnRhaW5lck5vZGUuY2hpbGROb2RlcztcbiAgICAgICAgbGV0IHByZXZpb3VzTm9kZTphbnkgPSBudWxsO1xuICAgICAgICB3aGlsZShpIDw9IGNoaWxkTm9kZXMubGVuZ3RoIC0gMSl7XG4gICAgICAgICAgICBpZihwcmV2aW91c05vZGUgJiYgaXNNeVdyYXBwZXIoY2hpbGROb2Rlc1tpXSkgJiYgaXNNeVdyYXBwZXIocHJldmlvdXNOb2RlKSl7XG5cbiAgICAgICAgICAgICAgICAgICAgbGV0IHByZXZpb3VzVGV4dCA9IHByZXZpb3VzTm9kZS5pbm5lclRleHQ7XG4gICAgICAgICAgICAgICAgICAgIHByZXZpb3VzTm9kZS5pbm5lclRleHQgPSBwcmV2aW91c1RleHQgKyBjaGlsZE5vZGVzW2ldLmlubmVyVGV4dDtcbiAgICAgICAgICAgICAgICAgICAgLy9jaGlsZE5vZGVzW2ldLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICBjaGlsZE5vZGVzW2ldLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoY2hpbGROb2Rlc1tpXSk7XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBwcmV2aW91c05vZGUgPSBjaGlsZE5vZGVzW2ldO1xuICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxufSIsImltcG9ydCB7IElUb29sQnV0dG9uIH0gZnJvbSAnLi9pbnRlcmZhY2VzL0lUb29sQnV0dG9uJztcbmltcG9ydCB7IElFZGl0b3IgfSBmcm9tICcuL2ludGVyZmFjZXMvSUVkaXRvcic7XG5pbXBvcnQgeyBJS2V5TGlzdGVuZXIgfSBmcm9tICcuL2ludGVyZmFjZXMvSUtleUxpc3RlbmVyJztcbmltcG9ydCB7IFRXcmFwcGVyIH0gZnJvbSAnLi9pbnRlcmZhY2VzL1RXcmFwcGVyJztcbmltcG9ydCB7IFN0YXRpY1Rvb2xzIH0gZnJvbSAnLi9TdGF0aWNUb29scyc7XG5cbnR5cGUgVFdyYXBwZXJDb2xsZWN0aW9uID0ge1xuICAgIFtlbGVtZW50TmFtZTpzdHJpbmddIDogVFdyYXBwZXI7XG59XG5cbmV4cG9ydCBjbGFzcyBFZGl0b3IgaW1wbGVtZW50cyBJRWRpdG9yIHtcblxuICAgIHByaXZhdGUgX2J1dHRvbnM6SVRvb2xCdXR0b25bXTtcblxuICAgIHByaXZhdGUgX2VkaXRvckRpdjpFbGVtZW50O1xuXG4gICAgcHJpdmF0ZSBfa2V5TGlzdGVuZXJzOmFueTtcblxuICAgIHByaXZhdGUgX3dyYXBwZXJzQ29sbGVjdGlvbjpUV3JhcHBlckNvbGxlY3Rpb24gPSB7fTtcblxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihlZGl0b3JEaXY6RWxlbWVudClcbiAgICB7XG4gICAgICAgIHRoaXMuX2J1dHRvbnMgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgdGhpcy5fa2V5TGlzdGVuZXJzID0ge307XG4gICAgICAgIHRoaXMuX2VkaXRvckRpdiA9IGVkaXRvckRpdjtcbiAgICAgICAgKDxIVE1MRWxlbWVudD50aGlzLl9lZGl0b3JEaXYpLm9ua2V5dXAgPSBmdW5jdGlvbihldmVudDpLZXlib2FyZEV2ZW50KXtcbiAgICAgICAgICAgIHRoaXMua2V5UHJlc3MoZXZlbnQpO1xuICAgICAgICB9LmJpbmQodGhpcyk7XG4gICAgICAgIGVkaXRvckRpdi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgZnVuY3Rpb24oZTpFdmVudCkge1xuICAgICAgICAgICAgbGV0IHJhbmdlID0gU3RhdGljVG9vbHMuZ2V0UmFuZ2UoKTtcbiAgICAgICAgICAgIGxldCBwYXRoID0gU3RhdGljVG9vbHMuZ2V0UGF0aChyYW5nZS5zdGFydENvbnRhaW5lcik7XG4gICAgICAgICAgICAvL2lmKCFTdGF0aWNUb29scy5pc05vZGVJbih0aGlzLl9lZGl0b3JEaXYsIHBhdGgpKXtcbiAgICAgICAgICAgIC8vICAgIHJldHVybjtcbiAgICAgICAgICAgIC8vfVxuICAgICAgICAgICAgZm9yKGxldCBpIGluIHRoaXMuX2J1dHRvbnMpe1xuICAgICAgICAgICAgICAgIHRoaXMuX2J1dHRvbnNbaV0udW5zZXRBY3RpdmUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzTXlCdXR0b24odGhpcy5fYnV0dG9uc1tpXSwgcGF0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0uYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc015QnV0dG9uKGJ1dHRvbjpJVG9vbEJ1dHRvbiwgcGF0aDpOb2RlW10pXG4gICAge1xuICAgICAgICBmb3IobGV0IGkgaW4gcGF0aCl7XG4gICAgICAgICAgICBpZigoPEhUTUxFbGVtZW50PnBhdGhbaV0pLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT0gYnV0dG9uLndyYXBwZXIuZWxOYW1lICYmXG4gICAgICAgICAgICAgICAgKDxIVE1MRWxlbWVudD5wYXRoW2ldKS5jbGFzc0xpc3QuY29udGFpbnMoYnV0dG9uLndyYXBwZXIuY2xhc3NOYW1lKSl7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRBY3RpdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUga2V5UHJlc3MoZXZlbnQ6S2V5Ym9hcmRFdmVudClcbiAgICB7XG4gICAgICAgIGxldCByYW5nZSA9IFN0YXRpY1Rvb2xzLmdldFJhbmdlKCk7XG4gICAgICAgIGxldCBwYXRoID0gU3RhdGljVG9vbHMuZ2V0UGF0aChyYW5nZS5zdGFydENvbnRhaW5lcik7XG4gICAgICAgIGZvcihsZXQgaSBpbiB0aGlzLl9idXR0b25zKXtcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbnNbaV0udW5zZXRBY3RpdmUoKTtcbiAgICAgICAgICAgIHRoaXMuaXNNeUJ1dHRvbih0aGlzLl9idXR0b25zW2ldLCBwYXRoKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKGV2ZW50LndoaWNoID09IG51bGwpIHsgLy8gSUVcbiAgICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlIDwgMzIpe1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fa2V5TGlzdGVuZXJzW2V2ZW50LmtleUNvZGVdLmV4ZWMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKGV2ZW50LndoaWNoICE9IDAgJiYgZXZlbnQuY2hhckNvZGUgIT0gMCkgeyAvLyDQstGB0LUg0LrRgNC+0LzQtSBJRVxuICAgICAgICAgICAgaWYgKGV2ZW50LndoaWNoIDwgMzIpe1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fa2V5TGlzdGVuZXJzW2V2ZW50LndoaWNoXS5leGVjKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXQgZWRpdG9yRGl2KCk6RWxlbWVudFxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VkaXRvckRpdjtcbiAgICB9XG5cbiAgICBwdWJsaWMgYWRkS2V5TGlzdGVuZXIoa2V5Q29kZTpudW1iZXIsIGtleUxpc3RlbmVyOklLZXlMaXN0ZW5lcilcbiAgICB7XG4gICAgICAgIHRoaXMuX2tleUxpc3RlbmVyc1trZXlDb2RlXSA9IGtleUxpc3RlbmVyO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGRXcmFwZXIod3JhcHBlcjpUV3JhcHBlcilcbiAgICB7XG4gICAgICAgIHRoaXMuX3dyYXBwZXJzQ29sbGVjdGlvblt3cmFwcGVyLmVsTmFtZSsnXycrd3JhcHBlci5jbGFzc05hbWVdID0gd3JhcHBlcjtcbiAgICB9XG5cbiAgICBwdWJsaWMgYWRkQnV0dG9uKGJ1dHRvbjpJVG9vbEJ1dHRvbilcbiAgICB7XG4gICAgICAgIGJ1dHRvbi5lbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBmdW5jdGlvbihlOkV2ZW50KXtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMudG9vbEJ1dHRvbkNsaWNrKGJ1dHRvbik7XG4gICAgICAgIH0uYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuX2J1dHRvbnMucHVzaChidXR0b24pO1xuICAgICAgICB0aGlzLl93cmFwcGVyc0NvbGxlY3Rpb25bYnV0dG9uLndyYXBwZXIuZWxOYW1lKydfJytidXR0b24ud3JhcHBlci5jbGFzc05hbWVdID0gYnV0dG9uLndyYXBwZXI7XG4gICAgICAgIGlmKGJ1dHRvbi53cmFwcGVyLmNoaWxkKXtcbiAgICAgICAgICAgIGxldCBjaGlsZCA9IGJ1dHRvbi53cmFwcGVyLmNoaWxkO1xuICAgICAgICAgICAgdGhpcy5fd3JhcHBlcnNDb2xsZWN0aW9uW2NoaWxkLmVsTmFtZSsnXycrY2hpbGQuY2xhc3NOYW1lXSA9IGNoaWxkO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB0b29sQnV0dG9uQ2xpY2soYnV0dG9uOklUb29sQnV0dG9uKVxuICAgIHtcbiAgICAgICAgYnV0dG9uLnJ1bigpO1xuICAgIH1cblxuICAgIHB1YmxpYyBjb250ZW50VG9TdHJpbmcobm9kZTpOb2RlKTpzdHJpbmdcbiAgICB7XG4gICAgICAgIGxldCBjaGlsZE5vZGVzID0gbm9kZS5jaGlsZE5vZGVzO1xuICAgICAgICBsZXQgcmVzdWx0ID0gJyc7XG4gICAgICAgIGZvcihsZXQgaT0wOyBpPD1jaGlsZE5vZGVzLmxlbmd0aC0xOyBpKyspe1xuICAgICAgICAgICAgbGV0IGNoaWxkTm9kZSA9IGNoaWxkTm9kZXNbaV07XG4gICAgICAgICAgICBpZihjaGlsZE5vZGUubm9kZU5hbWUgPT0gJyN0ZXh0Jyl7XG4gICAgICAgICAgICAgICAgcmVzdWx0ICs9ICg8VGV4dD5jaGlsZE5vZGUpLmRhdGE7XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBsZXQgbm9kZU5hbWUgPSBjaGlsZE5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICBsZXQgY2xhc3NOYW1lID0gKDxIVE1MRWxlbWVudD5jaGlsZE5vZGUpLmNsYXNzTmFtZTtcbiAgICAgICAgICAgICAgICBsZXQgd3JhcHBlckluZm8gPSB0aGlzLl93cmFwcGVyc0NvbGxlY3Rpb25bbm9kZU5hbWUrJ18nK2NsYXNzTmFtZV07XG4gICAgICAgICAgICAgICAgaWYod3JhcHBlckluZm8pe1xuICAgICAgICAgICAgICAgICAgICBpZihub2RlTmFtZSA9PSAnYnInKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnWy8nK3dyYXBwZXJJbmZvLmJiQ29kZSsnXSc7XG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICdbJyt3cmFwcGVySW5mby5iYkNvZGUrJ10nICsgdGhpcy5jb250ZW50VG9TdHJpbmcoY2hpbGROb2RlKSArICdbLycrd3JhcHBlckluZm8uYmJDb2RlKyddJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gdGhpcy5jb250ZW50VG9TdHJpbmcoY2hpbGROb2RlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzT3BlblRhZyhzdHI6c3RyaW5nKTpUV3JhcHBlclxuICAgIHtcbiAgICAgICAgZm9yKGxldCBpIGluIHRoaXMuX3dyYXBwZXJzQ29sbGVjdGlvbil7XG4gICAgICAgICAgICBsZXQgYmJDb2RlID0gdGhpcy5fd3JhcHBlcnNDb2xsZWN0aW9uW2ldLmJiQ29kZTtcbiAgICAgICAgICAgIGlmKHN0ci5pbmRleE9mKCdbJyArIGJiQ29kZSArICddJykgPT0gMCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3dyYXBwZXJzQ29sbGVjdGlvbltpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzQ2xvc2VUYWcoc3RyOnN0cmluZyk6VFdyYXBwZXJcbiAgICB7XG4gICAgICAgIGZvcihsZXQgaSBpbiB0aGlzLl93cmFwcGVyc0NvbGxlY3Rpb24pe1xuICAgICAgICAgICAgbGV0IGJiQ29kZSA9IHRoaXMuX3dyYXBwZXJzQ29sbGVjdGlvbltpXS5iYkNvZGU7XG4gICAgICAgICAgICBpZihzdHIuaW5kZXhPZignWy8nICsgYmJDb2RlICsgJ10nKSA9PSAwKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fd3JhcHBlcnNDb2xsZWN0aW9uW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdHJpbmdUb0NvbnRlbnQoc3RyOnN0cmluZylcbiAgICB7XG4gICAgICAgIGxldCBjdXJlbnROb2RlID0gPEhUTUxFbGVtZW50PnRoaXMuZWRpdG9yRGl2O1xuICAgICAgICBsZXQgY3VyU3RyID0gJyc7XG4gICAgICAgIGxldCBjdXJlbnRQb3MgPSAwO1xuICAgICAgICB3aGlsZShjdXJlbnRQb3MgPD0gc3RyLmxlbmd0aCAtIDEpe1xuICAgICAgICAgICAgbGV0IHN1YlN0ciA9IHN0ci5zdWJzdHIoY3VyZW50UG9zLCA2KVxuICAgICAgICAgICAgbGV0IG9wZW5UYWcgPSB0aGlzLmlzT3BlblRhZyhzdWJTdHIpO1xuICAgICAgICAgICAgaWYob3BlblRhZyl7XG4gICAgICAgICAgICAgICAgaWYoY3VyU3RyKXtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHR4dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGN1clN0cik7XG4gICAgICAgICAgICAgICAgICAgIGN1cmVudE5vZGUuYXBwZW5kQ2hpbGQodHh0KTtcbiAgICAgICAgICAgICAgICAgICAgY3VyU3RyID0gJyc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBlbE5hbWUgPSBvcGVuVGFnLmVsTmFtZTtcbiAgICAgICAgICAgICAgICBsZXQgY2xhc3NOYW1lID0gb3BlblRhZy5jbGFzc05hbWU7XG4gICAgICAgICAgICAgICAgbGV0IG5ld05vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGVsTmFtZSk7XG4gICAgICAgICAgICAgICAgbmV3Tm9kZS5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XG4gICAgICAgICAgICAgICAgY3VyZW50Tm9kZS5hcHBlbmRDaGlsZChuZXdOb2RlKTtcbiAgICAgICAgICAgICAgICBjdXJlbnROb2RlID0gbmV3Tm9kZTtcbiAgICAgICAgICAgICAgICBjdXJlbnRQb3MgKz0gb3BlblRhZy5iYkNvZGUubGVuZ3RoICsgMjtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBjbG9zZVRhZyA9IHRoaXMuaXNDbG9zZVRhZyhzdWJTdHIpO1xuICAgICAgICAgICAgaWYoY2xvc2VUYWcpe1xuICAgICAgICAgICAgICAgIGlmKGN1cmVudE5vZGUgPT0gdGhpcy5lZGl0b3JEaXYpe1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYoY3VyU3RyKXtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHR4dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGN1clN0cik7XG4gICAgICAgICAgICAgICAgICAgIGN1cmVudE5vZGUuYXBwZW5kQ2hpbGQodHh0KTtcbiAgICAgICAgICAgICAgICAgICAgY3VyU3RyID0gJyc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBlbE5hbWUgPSBjbG9zZVRhZy5lbE5hbWU7XG4gICAgICAgICAgICAgICAgY3VyZW50Tm9kZSA9IGN1cmVudE5vZGUucGFyZW50RWxlbWVudDtcbiAgICAgICAgICAgICAgICBjdXJlbnRQb3MgKz0gY2xvc2VUYWcuYmJDb2RlLmxlbmd0aCArIDM7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXJTdHIgKz0gc3RyLnN1YnN0cihjdXJlbnRQb3MsIDEpO1xuICAgICAgICAgICAgY3VyZW50UG9zICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgaWYoY3VyU3RyKXtcbiAgICAgICAgICAgIGxldCB0eHQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjdXJTdHIpO1xuICAgICAgICAgICAgY3VyZW50Tm9kZS5hcHBlbmRDaGlsZCh0eHQpO1xuICAgICAgICAgICAgY3VyU3RyID0gJyc7XG4gICAgICAgIH1cbiAgICB9XG5cbn0iXSwic291cmNlUm9vdCI6IiJ9